{% extends "base.html" %}
{% block title %}Upload Video â€” hellsy.tube{% endblock %}

{% block content %}
<div class="container">
    <div class="upload-container">
        <h1 class="upload-heading">Upload Video</h1>
        <p class="upload-sub">Share your video with the world. Max {{ (max_size / 1048576)|int }}MB &middot; MP4, WebM, OGG, MOV</p>

        <div class="upload-dropzone" id="dropzone">
            <div class="dropzone-content" id="dropzoneContent">
                <div class="dropzone-icon">&#9654;</div>
                <p class="dropzone-text">Drag & drop your video here</p>
                <p class="dropzone-or">or</p>
                <label class="btn btn-upload btn-browse">
                    Browse Files
                    <input type="file" id="fileInput" accept="video/*" hidden>
                </label>
            </div>
            <div class="upload-progress" id="uploadProgress" style="display:none">
                <div class="progress-filename" id="progressFilename"></div>
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" id="progressFill"></div>
                </div>
                <div class="progress-info">
                    <span id="progressPercent">0%</span>
                    <span id="progressSize"></span>
                </div>
            </div>
        </div>

        <div class="upload-form" id="uploadForm" style="display:none">
            <div class="form-preview" id="formPreview">
                <video id="previewVideo" muted class="preview-video"></video>
            </div>

            <div class="form-fields">
                <div class="field">
                    <label for="title">Title <span class="required">*</span></label>
                    <input type="text" id="title" placeholder="Give your video a title" required maxlength="200">
                </div>
                <div class="field">
                    <label for="description">Description</label>
                    <textarea id="description" placeholder="Tell viewers about your video" rows="4" maxlength="5000"></textarea>
                </div>
                <div class="field">
                    <label for="tags">Tags</label>
                    <input type="text" id="tags" placeholder="gaming, music, tutorial (comma separated)">
                </div>
            </div>
        </div>

        <div class="upload-actions" id="uploadActions" style="display:none">
            <button class="btn btn-upload btn-lg" id="submitBtn" onclick="submitUpload()">Publish Video</button>
            <button class="btn btn-ghost" onclick="resetUpload()">Cancel</button>
        </div>

        <div class="upload-success" id="uploadSuccess" style="display:none">
            <div class="success-icon">&#10003;</div>
            <h2>Video Published!</h2>
            <p>Your video is now live on hellsy.tube</p>
            <a href="/" class="btn btn-upload">Go to Home</a>
            <a id="watchLink" href="/" class="btn btn-ghost">Watch Video</a>
        </div>
    </div>
</div>
{% endblock %}
