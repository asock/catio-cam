{% extends "base.html" %}

{% block title %}Admin Panel - Catio.cam{% endblock %}

{% block content %}
<div class="container">
    <h1>Admin Panel</h1>
    
    <section class="admin-section">
        <h2>Pending Streams ({{ pending_streams|length }})</h2>
        {% if pending_streams %}
        <div class="admin-streams-list">
            {% for stream in pending_streams %}
            <div class="admin-stream-item">
                <div class="admin-stream-content">
                    <h3>{{ stream.title }}</h3>
                    <p class="stream-meta">
                        <strong>Owner:</strong> {{ stream.owner_name }} ({{ stream.owner_email }})<br>
                        <strong>Platform:</strong> {{ stream.platform }}<br>
                        <strong>URL:</strong> <a href="{{ stream.channel_url }}" target="_blank">{{ stream.channel_url }}</a><br>
                        <strong>Submitted:</strong> {{ stream.created_at }}
                    </p>
                </div>
                <div class="admin-stream-actions">
                    <form method="post" action="/admin/approve/{{ stream.id }}" style="display: inline;">
                        <button type="submit" class="btn-success">Approve</button>
                    </form>
                    <form method="post" action="/admin/reject/{{ stream.id }}" style="display: inline;">
                        <button type="submit" class="btn-danger">Reject</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="empty-message">No pending streams</p>
        {% endif %}
    </section>
    
    <section class="admin-section">
        <h2>Approved Streams ({{ approved_streams|length }})</h2>
        {% if approved_streams %}
        <div class="admin-streams-list">
            {% for stream in approved_streams %}
            <div class="admin-stream-item {% if stream.is_featured %}featured-item{% endif %}">
                <div class="admin-stream-content">
                    <h3>{{ stream.title }} {% if stream.is_featured %}<span class="featured-badge">â˜… FEATURED</span>{% endif %}</h3>
                    <p class="stream-meta">
                        <strong>Owner:</strong> {{ stream.owner_name }}<br>
                        <strong>Platform:</strong> {{ stream.platform }}<br>
                        <strong>Viewers:</strong> {{ stream.viewers }}
                    </p>
                </div>
                <div class="admin-stream-actions">
                    {% if not stream.is_featured %}
                    <form method="post" action="/admin/feature/{{ stream.id }}" style="display: inline;">
                        <button type="submit" class="btn-primary">Set as Featured</button>
                    </form>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="empty-message">No approved streams</p>
        {% endif %}
    </section>
</div>
{% endblock %}
